\hypertarget{caribou_8c}{\section{src/kernel/caribou.c File Reference}
\label{caribou_8c}\index{src/kernel/caribou.\-c@{src/kernel/caribou.\-c}}
}
{\ttfamily \#include $<$caribou.\-h$>$}\\*
{\ttfamily \#include $<$chip/chip.\-h$>$}\\*
Include dependency graph for caribou.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{caribou_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
const char $\ast$ \hyperlink{caribou_8c_a2eb1e1c5f0f424d820818c92cf3ea0a1}{caribou\-\_\-version} ()
\item 
void \hyperlink{caribou_8c_aa96052094e04ab3f91649b07cccbb18e}{\-\_\-halt} ()
\item 
int \hyperlink{caribou_8c_ae9efd2bf2874e10d63a5cf40bf33802c}{caribou\-\_\-lock\-\_\-state} ()
\begin{DoxyCompactList}\small\item\em Test the state of the C\-A\-R\-I\-B\-O\-U scheduler lock. \end{DoxyCompactList}\item 
int \hyperlink{caribou_8c_a3f6b11e983ac91165a6fd14d35aed51f}{caribou\-\_\-lock} ()
\begin{DoxyCompactList}\small\item\em Lock the C\-A\-R\-I\-B\-O\-U scheduler onto current thread. \end{DoxyCompactList}\item 
int \hyperlink{caribou_8c_ae6fc3a012fed78adc9a36933057c857f}{caribou\-\_\-unlock} ()
\begin{DoxyCompactList}\small\item\em Unlock the C\-A\-R\-I\-B\-O\-U scheduler. \end{DoxyCompactList}\item 
void \hyperlink{caribou_8c_aa8627675e0c04813d45817fda119c5dc}{caribou\-\_\-lock\-\_\-set} (int state)
\begin{DoxyCompactList}\small\item\em Set the C\-A\-R\-I\-B\-O\-U scheduler lock state. \end{DoxyCompactList}\item 
void \hyperlink{caribou_8c_a8c39159ad641e81210c3307ab7d64227}{caribou\-\_\-preempt} ()
\begin{DoxyCompactList}\small\item\em Force scheduler to perform a context switch. \end{DoxyCompactList}\item 
\hyperlink{caribou_8c_af9aace1b44b73111e15aa39f06f43456}{\-\_\-\-\_\-attribute\-\_\-\-\_\-} ((weak))
\begin{DoxyCompactList}\small\item\em Abort on a hard fault. \end{DoxyCompactList}\item 
void \hyperlink{caribou_8c_a9a6ffa8babf5f0ea286bda1e464d7623}{caribou\-\_\-exec} (void)
\begin{DoxyCompactList}\small\item\em The C\-A\-R\-I\-B\-O\-U main thread loop. \hyperlink{caribou_8c_a9a6ffa8babf5f0ea286bda1e464d7623}{caribou\-\_\-exec()} does not return. \end{DoxyCompactList}\item 
void \hyperlink{caribou_8c_a2d4f021763a6e4c2918ef9f4285d9585}{caribou\-\_\-init\-\_\-clock} ()
\begin{DoxyCompactList}\small\item\em Initialize the clock such that jiffies start ticking. \end{DoxyCompactList}\item 
void \hyperlink{caribou_8c_a586f22d1e2495896b4345fa5652e06c9}{caribou\-\_\-init} (int8\-\_\-t priority)
\begin{DoxyCompactList}\small\item\em Initialize the C\-A\-R\-I\-B\-O\-U main thread. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}




\begin{DoxyAuthor}{Author}
Mike Sharkey \href{mailto:mike@pikeaero.com}{\tt mike@pikeaero.\-com}. 
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
© 2005-\/2013 by Pike Aerospace Research Corporation 

© 2014-\/2015 by Mike Sharkey
\end{DoxyCopyright}
This file is part of C\-A\-R\-I\-B\-O\-U R\-T\-O\-S C\-A\-R\-I\-B\-O\-U R\-T\-O\-S is free software\-: you can redistribute it and/or modify it under the terms of the Beerware License Version 43. \char`\"{}\-T\-H\-E B\-E\-E\-R-\/\-W\-A\-R\-E L\-I\-C\-E\-N\-S\-E\char`\"{} (Revision 43)\-: Mike Sharkey \href{mailto:mike@pikeaero.com}{\tt mike@pikeaero.\-com} wrote this file. As long as you retain this notice you can do whatever you want with this stuff. If we meet some day, and you think this stuff is worth it, you can buy me a beer in return $\sim$ Mike Sharkey 

Definition in file \hyperlink{caribou_8c_source}{caribou.\-c}.



\subsection{Function Documentation}
\hypertarget{caribou_8c_af9aace1b44b73111e15aa39f06f43456}{\index{caribou.\-c@{caribou.\-c}!\-\_\-\-\_\-attribute\-\_\-\-\_\-@{\-\_\-\-\_\-attribute\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-attribute\-\_\-\-\_\-@{\-\_\-\-\_\-attribute\-\_\-\-\_\-}!caribou.c@{caribou.\-c}}
\subsubsection[{\-\_\-\-\_\-attribute\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}\-\_\-\-\_\-attribute\-\_\-\-\_\- (
\begin{DoxyParamCaption}
\item[{(weak)}]{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_af9aace1b44b73111e15aa39f06f43456}


Abort on a hard fault. 

Main thread idle time processing. This weakly liked function gets called during main (caribou) thread idle time. There is no guaranteed schedule, however, under normal circumstances, the board\-\_\-idle() function should be called with a period of one millisecond. Normally the function over-\/ride resides in board.\-c/pp and must utilize \char`\"{}\-C\char`\"{} linkage.





notify memory free'd

notify invalid free'd

notify invalid realloc'd

notify invalid alloc'd 

Definition at line 72 of file caribou.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{caribou_8c_af9aace1b44b73111e15aa39f06f43456_cgraph}
\end{center}
\end{figure}


\hypertarget{caribou_8c_aa96052094e04ab3f91649b07cccbb18e}{\index{caribou.\-c@{caribou.\-c}!\-\_\-halt@{\-\_\-halt}}
\index{\-\_\-halt@{\-\_\-halt}!caribou.c@{caribou.\-c}}
\subsubsection[{\-\_\-halt}]{\setlength{\rightskip}{0pt plus 5cm}void \-\_\-halt (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_aa96052094e04ab3f91649b07cccbb18e}


Here is the caller graph for this function\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=228pt]{caribou_8c_aa96052094e04ab3f91649b07cccbb18e_icgraph}
\end{center}
\end{figure}


\hypertarget{caribou_8c_a9a6ffa8babf5f0ea286bda1e464d7623}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-exec@{caribou\-\_\-exec}}
\index{caribou\-\_\-exec@{caribou\-\_\-exec}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-exec}]{\setlength{\rightskip}{0pt plus 5cm}void caribou\-\_\-exec (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_a9a6ffa8babf5f0ea286bda1e464d7623}


The C\-A\-R\-I\-B\-O\-U main thread loop. \hyperlink{caribou_8c_a9a6ffa8babf5f0ea286bda1e464d7623}{caribou\-\_\-exec()} does not return. 

\begin{DoxyNote}{Note}
If it is desired to run some application code from the main thread, then it is recommended that the application code implement the main\-\_\-idle() function which is callback from the main thread idle loop, and will be called after each cycle of C\-A\-R\-I\-B\-O\-U house keeping. 
\end{DoxyNote}
never to return. 

Definition at line 90 of file caribou.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{caribou_8c_a9a6ffa8babf5f0ea286bda1e464d7623_cgraph}
\end{center}
\end{figure}


\hypertarget{caribou_8c_a586f22d1e2495896b4345fa5652e06c9}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-init@{caribou\-\_\-init}}
\index{caribou\-\_\-init@{caribou\-\_\-init}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void caribou\-\_\-init (
\begin{DoxyParamCaption}
\item[{int8\-\_\-t}]{priority}
\end{DoxyParamCaption}
)}}\label{caribou_8c_a586f22d1e2495896b4345fa5652e06c9}


Initialize the C\-A\-R\-I\-B\-O\-U main thread. 


\begin{DoxyParams}{Parameters}
{\em priority} & The priority to assign to the main thread. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Interrupts are disabled for the duration of this function. 

\hyperlink{caribou_8c_a586f22d1e2495896b4345fa5652e06c9}{caribou\-\_\-init()} must be called before any other C\-A\-R\-I\-B\-O\-U threads are created. 
\end{DoxyNote}


Definition at line 115 of file caribou.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{caribou_8c_a586f22d1e2495896b4345fa5652e06c9_cgraph}
\end{center}
\end{figure}


\hypertarget{caribou_8c_a2d4f021763a6e4c2918ef9f4285d9585}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-init\-\_\-clock@{caribou\-\_\-init\-\_\-clock}}
\index{caribou\-\_\-init\-\_\-clock@{caribou\-\_\-init\-\_\-clock}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-init\-\_\-clock}]{\setlength{\rightskip}{0pt plus 5cm}void caribou\-\_\-init\-\_\-clock (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_a2d4f021763a6e4c2918ef9f4285d9585}


Initialize the clock such that jiffies start ticking. 



Definition at line 98 of file caribou.\-c.



Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=278pt]{caribou_8c_a2d4f021763a6e4c2918ef9f4285d9585_icgraph}
\end{center}
\end{figure}


\hypertarget{caribou_8c_a3f6b11e983ac91165a6fd14d35aed51f}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-lock@{caribou\-\_\-lock}}
\index{caribou\-\_\-lock@{caribou\-\_\-lock}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-lock}]{\setlength{\rightskip}{0pt plus 5cm}int caribou\-\_\-lock (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_a3f6b11e983ac91165a6fd14d35aed51f}


Lock the C\-A\-R\-I\-B\-O\-U scheduler onto current thread. 



 

Definition at line 40 of file caribou.\-c.

\hypertarget{caribou_8c_aa8627675e0c04813d45817fda119c5dc}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-lock\-\_\-set@{caribou\-\_\-lock\-\_\-set}}
\index{caribou\-\_\-lock\-\_\-set@{caribou\-\_\-lock\-\_\-set}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-lock\-\_\-set}]{\setlength{\rightskip}{0pt plus 5cm}void caribou\-\_\-lock\-\_\-set (
\begin{DoxyParamCaption}
\item[{int}]{state}
\end{DoxyParamCaption}
)}}\label{caribou_8c_aa8627675e0c04813d45817fda119c5dc}


Set the C\-A\-R\-I\-B\-O\-U scheduler lock state. 



 

Definition at line 56 of file caribou.\-c.

\hypertarget{caribou_8c_ae9efd2bf2874e10d63a5cf40bf33802c}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-lock\-\_\-state@{caribou\-\_\-lock\-\_\-state}}
\index{caribou\-\_\-lock\-\_\-state@{caribou\-\_\-lock\-\_\-state}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-lock\-\_\-state}]{\setlength{\rightskip}{0pt plus 5cm}int caribou\-\_\-lock\-\_\-state (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_ae9efd2bf2874e10d63a5cf40bf33802c}


Test the state of the C\-A\-R\-I\-B\-O\-U scheduler lock. 



 \begin{DoxyReturn}{Returns}
The number of lock state 
\end{DoxyReturn}


Definition at line 32 of file caribou.\-c.

\hypertarget{caribou_8c_a8c39159ad641e81210c3307ab7d64227}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-preempt@{caribou\-\_\-preempt}}
\index{caribou\-\_\-preempt@{caribou\-\_\-preempt}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-preempt}]{\setlength{\rightskip}{0pt plus 5cm}void caribou\-\_\-preempt (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_a8c39159ad641e81210c3307ab7d64227}


Force scheduler to perform a context switch. 



 

Definition at line 64 of file caribou.\-c.



Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{caribou_8c_a8c39159ad641e81210c3307ab7d64227_icgraph}
\end{center}
\end{figure}


\hypertarget{caribou_8c_ae6fc3a012fed78adc9a36933057c857f}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-unlock@{caribou\-\_\-unlock}}
\index{caribou\-\_\-unlock@{caribou\-\_\-unlock}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-unlock}]{\setlength{\rightskip}{0pt plus 5cm}int caribou\-\_\-unlock (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_ae6fc3a012fed78adc9a36933057c857f}


Unlock the C\-A\-R\-I\-B\-O\-U scheduler. 



 

Definition at line 48 of file caribou.\-c.

\hypertarget{caribou_8c_a2eb1e1c5f0f424d820818c92cf3ea0a1}{\index{caribou.\-c@{caribou.\-c}!caribou\-\_\-version@{caribou\-\_\-version}}
\index{caribou\-\_\-version@{caribou\-\_\-version}!caribou.c@{caribou.\-c}}
\subsubsection[{caribou\-\_\-version}]{\setlength{\rightskip}{0pt plus 5cm}const char$\ast$ caribou\-\_\-version (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{caribou_8c_a2eb1e1c5f0f424d820818c92cf3ea0a1}


 \begin{DoxyReturn}{Returns}
The Caribou Version. 
\end{DoxyReturn}


Definition at line 21 of file caribou.\-c.

