\hypertarget{semaphore_8c}{\section{src/lib/semaphore.c File Reference}
\label{semaphore_8c}\index{src/lib/semaphore.\-c@{src/lib/semaphore.\-c}}
}
{\ttfamily \#include $<$caribou/kernel/interrupt.\-h$>$}\\*
{\ttfamily \#include $<$caribou/lib/semaphore.\-h$>$}\\*
{\ttfamily \#include $<$caribou/lib/errno.\-h$>$}\\*
{\ttfamily \#include $<$caribou/lib/heap.\-h$>$}\\*
{\ttfamily \#include $<$caribou/lib/string.\-h$>$}\\*
Include dependency graph for semaphore.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$ \hyperlink{semaphore_8c_aa69e51ae42bde0ea04c6ca646a92dfa5}{caribou\-\_\-semaphore\-\_\-new} (int count)
\begin{DoxyCompactList}\small\item\em Allocate and initialize a new semaphore on the heap. \end{DoxyCompactList}\item 
void \hyperlink{semaphore_8c_aa3c929c9378394cf694e18d4b3d94a2b}{caribou\-\_\-semaphore\-\_\-delete} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore)
\item 
\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$ \hyperlink{semaphore_8c_a06033d05e807c3eb22faaa2dbe5798c8}{caribou\-\_\-semaphore\-\_\-init} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore, int count)
\item 
\hyperlink{types_8h_abb452686968e48b67397da5f97445f5b}{bool} \hyperlink{semaphore_8c_aa7f7d598cb498003f0dcb5bed70df47d}{caribou\-\_\-semaphore\-\_\-signal} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore)
\begin{DoxyCompactList}\small\item\em This operation atomically increment the semaphore counter. \end{DoxyCompactList}\item 
\hyperlink{types_8h_abb452686968e48b67397da5f97445f5b}{bool} \hyperlink{semaphore_8c_a43b2a6ceea574eaf6363d3071be24901}{caribou\-\_\-semaphore\-\_\-wait} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore, \hyperlink{timer_8h_a905a26361b93888fedb5a0bf658e50e8}{caribou\-\_\-tick\-\_\-t} timeout)
\begin{DoxyCompactList}\small\item\em This operation atomically decreases the semaphore counter. \end{DoxyCompactList}\item 
\hyperlink{types_8h_abb452686968e48b67397da5f97445f5b}{bool} \hyperlink{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81}{caribou\-\_\-semaphore\-\_\-try\-\_\-wait} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore)
\begin{DoxyCompactList}\small\item\em This operation decreases the semaphore counter. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}




\begin{DoxyAuthor}{Author}
Mike Sharkey \href{mailto:mike@pikeaero.com}{\tt mike@pikeaero.\-com}. 
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
© 2005-\/2013 by Pike Aerospace Research Corporation 

© 2014-\/2015 by Mike Sharkey
\end{DoxyCopyright}
This file is part of C\-A\-R\-I\-B\-O\-U R\-T\-O\-S C\-A\-R\-I\-B\-O\-U R\-T\-O\-S is free software\-: you can redistribute it and/or modify it under the terms of the Beerware License Version 43. \char`\"{}\-T\-H\-E B\-E\-E\-R-\/\-W\-A\-R\-E L\-I\-C\-E\-N\-S\-E\char`\"{} (Revision 43)\-: Mike Sharkey \href{mailto:mike@pikeaero.com}{\tt mike@pikeaero.\-com} wrote this file. As long as you retain this notice you can do whatever you want with this stuff. If we meet some day, and you think this stuff is worth it, you can buy me a beer in return $\sim$ Mike Sharkey 

Definition in file \hyperlink{semaphore_8c_source}{semaphore.\-c}.



\subsection{Function Documentation}
\hypertarget{semaphore_8c_aa3c929c9378394cf694e18d4b3d94a2b}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-delete@{caribou\-\_\-semaphore\-\_\-delete}}
\index{caribou\-\_\-semaphore\-\_\-delete@{caribou\-\_\-semaphore\-\_\-delete}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-delete}]{\setlength{\rightskip}{0pt plus 5cm}void caribou\-\_\-semaphore\-\_\-delete (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_aa3c929c9378394cf694e18d4b3d94a2b}


Definition at line 37 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=284pt]{semaphore_8c_aa3c929c9378394cf694e18d4b3d94a2b_cgraph}
\end{center}
\end{figure}


\hypertarget{semaphore_8c_a06033d05e807c3eb22faaa2dbe5798c8}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-init@{caribou\-\_\-semaphore\-\_\-init}}
\index{caribou\-\_\-semaphore\-\_\-init@{caribou\-\_\-semaphore\-\_\-init}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf caribou\-\_\-semaphore\-\_\-t}$\ast$ caribou\-\_\-semaphore\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore, }
\item[{int}]{count}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_a06033d05e807c3eb22faaa2dbe5798c8}


Definition at line 45 of file semaphore.\-c.

\hypertarget{semaphore_8c_aa69e51ae42bde0ea04c6ca646a92dfa5}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-new@{caribou\-\_\-semaphore\-\_\-new}}
\index{caribou\-\_\-semaphore\-\_\-new@{caribou\-\_\-semaphore\-\_\-new}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-new}]{\setlength{\rightskip}{0pt plus 5cm}{\bf caribou\-\_\-semaphore\-\_\-t}$\ast$ caribou\-\_\-semaphore\-\_\-new (
\begin{DoxyParamCaption}
\item[{int}]{count}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_aa69e51ae42bde0ea04c6ca646a92dfa5}


Allocate and initialize a new semaphore on the heap. 



 
\begin{DoxyParams}{Parameters}
{\em depth} & The depth of the thread queue (max number of waiting threads). \\
\hline
{\em count} & The initial semaphore count. \\
\hline
\end{DoxyParams}


Definition at line 27 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=288pt]{semaphore_8c_aa69e51ae42bde0ea04c6ca646a92dfa5_cgraph}
\end{center}
\end{figure}


\hypertarget{semaphore_8c_aa7f7d598cb498003f0dcb5bed70df47d}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-signal@{caribou\-\_\-semaphore\-\_\-signal}}
\index{caribou\-\_\-semaphore\-\_\-signal@{caribou\-\_\-semaphore\-\_\-signal}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-signal}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} caribou\-\_\-semaphore\-\_\-signal (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_aa7f7d598cb498003f0dcb5bed70df47d}


This operation atomically increment the semaphore counter. 



 
\begin{DoxyParams}{Parameters}
{\em semaphore} & The semaphore to operate on. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the semaphore was released. 
\end{DoxyReturn}


Definition at line 58 of file semaphore.\-c.

\hypertarget{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-try\-\_\-wait@{caribou\-\_\-semaphore\-\_\-try\-\_\-wait}}
\index{caribou\-\_\-semaphore\-\_\-try\-\_\-wait@{caribou\-\_\-semaphore\-\_\-try\-\_\-wait}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-try\-\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} caribou\-\_\-semaphore\-\_\-try\-\_\-wait (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81}


This operation decreases the semaphore counter. 



 
\begin{DoxyParams}{Parameters}
{\em semaphore} & The semaphore to operate on. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the semaphore was released. 
\end{DoxyReturn}


Definition at line 92 of file semaphore.\-c.



Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81_icgraph}
\end{center}
\end{figure}


\hypertarget{semaphore_8c_a43b2a6ceea574eaf6363d3071be24901}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-wait@{caribou\-\_\-semaphore\-\_\-wait}}
\index{caribou\-\_\-semaphore\-\_\-wait@{caribou\-\_\-semaphore\-\_\-wait}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} caribou\-\_\-semaphore\-\_\-wait (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore, }
\item[{{\bf caribou\-\_\-tick\-\_\-t}}]{timeout}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_a43b2a6ceea574eaf6363d3071be24901}


This operation atomically decreases the semaphore counter. 



 
\begin{DoxyParams}{Parameters}
{\em semaphore} & The semaphore to operate on. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true of the semaphore was released. 
\end{DoxyReturn}


Definition at line 71 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_a43b2a6ceea574eaf6363d3071be24901_cgraph}
\end{center}
\end{figure}


