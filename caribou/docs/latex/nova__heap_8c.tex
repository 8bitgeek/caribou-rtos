\hypertarget{nova__heap_8c}{\section{src/lib/nova\-\_\-heap.c File Reference}
\label{nova__heap_8c}\index{src/lib/nova\-\_\-heap.\-c@{src/lib/nova\-\_\-heap.\-c}}
}
{\ttfamily \#include $<$caribou/lib/heap.\-h$>$}\\*
Include dependency graph for nova\-\_\-heap.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=305pt]{nova__heap_8c__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structheap__tag}{heap\-\_\-tag}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{nova__heap_8c_a64c19d60b1d49b42806e90615ed21bc5}{H\-E\-A\-P\-\_\-\-B\-L\-O\-C\-K\-\_\-\-S\-I\-Z\-E}~16   /$\ast$ Must be a power of two. $\ast$/
\item 
\#define \hyperlink{nova__heap_8c_ae31a3e1c9ca396a75f095a213d7448e4}{A\-D\-D\-A\-D\-R}(x, n)~((void $\ast$)((unsigned char $\ast$)(x)+(n)))
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structheap__tag}{heap\-\_\-tag} \hyperlink{nova__heap_8c_ab6b1b74ddc8b75aa3419e8b249113392}{heap\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{nova__heap_8c_a8038c1ab330e938a5ec2337476e0b5b1}{nova\-\_\-heap\-\_\-init} (void $\ast$heap\-\_\-base, void $\ast$heap\-\_\-end)
\begin{DoxyCompactList}\small\item\em Initialize memory. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{nova__heap_8c_a9b30a94e8a5318025972871358937770}{nova\-\_\-heap\-\_\-calloc} (size\-\_\-t nmemb, size\-\_\-t size)
\item 
void $\ast$ \hyperlink{nova__heap_8c_a7d415ea038c9c1b91e25a4a5de381ed5}{nova\-\_\-heap\-\_\-malloc} (size\-\_\-t size)
\item 
void \hyperlink{nova__heap_8c_ab1b93d0bd475e79adee7fb1437fe7688}{nova\-\_\-heap\-\_\-free} (void $\ast$addr)
\item 
void $\ast$ \hyperlink{nova__heap_8c_ad6cb56200d8cbbbb7340bce80a289365}{nova\-\_\-heap\-\_\-realloc} (void $\ast$p, size\-\_\-t size)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{nova__heap_8c_ab6b1b74ddc8b75aa3419e8b249113392}{heap\-\_\-t} $\ast$ \hyperlink{nova__heap_8c_a030aa741640330c5c035c1a9dfd6e87f}{heap} = \hyperlink{types_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{N\-U\-L\-L}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{nova__heap_8c_ae31a3e1c9ca396a75f095a213d7448e4}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!A\-D\-D\-A\-D\-R@{A\-D\-D\-A\-D\-R}}
\index{A\-D\-D\-A\-D\-R@{A\-D\-D\-A\-D\-R}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{A\-D\-D\-A\-D\-R}]{\setlength{\rightskip}{0pt plus 5cm}\#define A\-D\-D\-A\-D\-R(
\begin{DoxyParamCaption}
\item[{}]{x, }
\item[{}]{n}
\end{DoxyParamCaption}
)~((void $\ast$)((unsigned char $\ast$)(x)+(n)))}}\label{nova__heap_8c_ae31a3e1c9ca396a75f095a213d7448e4}


Definition at line 28 of file nova\-\_\-heap.\-c.

\hypertarget{nova__heap_8c_a64c19d60b1d49b42806e90615ed21bc5}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!H\-E\-A\-P\-\_\-\-B\-L\-O\-C\-K\-\_\-\-S\-I\-Z\-E@{H\-E\-A\-P\-\_\-\-B\-L\-O\-C\-K\-\_\-\-S\-I\-Z\-E}}
\index{H\-E\-A\-P\-\_\-\-B\-L\-O\-C\-K\-\_\-\-S\-I\-Z\-E@{H\-E\-A\-P\-\_\-\-B\-L\-O\-C\-K\-\_\-\-S\-I\-Z\-E}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{H\-E\-A\-P\-\_\-\-B\-L\-O\-C\-K\-\_\-\-S\-I\-Z\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define H\-E\-A\-P\-\_\-\-B\-L\-O\-C\-K\-\_\-\-S\-I\-Z\-E~16   /$\ast$ Must be a power of two. $\ast$/}}\label{nova__heap_8c_a64c19d60b1d49b42806e90615ed21bc5}


Definition at line 27 of file nova\-\_\-heap.\-c.



\subsection{Typedef Documentation}
\hypertarget{nova__heap_8c_ab6b1b74ddc8b75aa3419e8b249113392}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!heap\-\_\-t@{heap\-\_\-t}}
\index{heap\-\_\-t@{heap\-\_\-t}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{heap\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf heap\-\_\-tag}  {\bf heap\-\_\-t}}}\label{nova__heap_8c_ab6b1b74ddc8b75aa3419e8b249113392}


\subsection{Function Documentation}
\hypertarget{nova__heap_8c_a9b30a94e8a5318025972871358937770}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!nova\-\_\-heap\-\_\-calloc@{nova\-\_\-heap\-\_\-calloc}}
\index{nova\-\_\-heap\-\_\-calloc@{nova\-\_\-heap\-\_\-calloc}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{nova\-\_\-heap\-\_\-calloc}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ nova\-\_\-heap\-\_\-calloc (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{nmemb, }
\item[{size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{nova__heap_8c_a9b30a94e8a5318025972871358937770}
The \hyperlink{heap_8h_a62b7798461bd461da64c5f9d35feddf7}{calloc()} function allocates memory for an array of nmemb elements of size bytes each and returns a pointer to the allocated memory. The memory is set to zero. If nmemb or size is 0, then \hyperlink{heap_8h_a62b7798461bd461da64c5f9d35feddf7}{calloc()} returns either N\-U\-L\-L, or a unique pointer value that can later be successfully passed to \hyperlink{heap_8h_a9f850d0608418aea291e4c0fdab93826}{free()}. 

Definition at line 45 of file nova\-\_\-heap.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=258pt]{nova__heap_8c_a9b30a94e8a5318025972871358937770_cgraph}
\end{center}
\end{figure}


\hypertarget{nova__heap_8c_ab1b93d0bd475e79adee7fb1437fe7688}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!nova\-\_\-heap\-\_\-free@{nova\-\_\-heap\-\_\-free}}
\index{nova\-\_\-heap\-\_\-free@{nova\-\_\-heap\-\_\-free}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{nova\-\_\-heap\-\_\-free}]{\setlength{\rightskip}{0pt plus 5cm}void nova\-\_\-heap\-\_\-free (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{addr}
\end{DoxyParamCaption}
)}}\label{nova__heap_8c_ab1b93d0bd475e79adee7fb1437fe7688}
\hyperlink{heap_8h_a9f850d0608418aea291e4c0fdab93826}{free()} frees the memory space pointed to by ptr, which must have been returned by a previous call to \hyperlink{heap_8h_a3b4debdfb967b69d84804fba8012bfcd}{malloc()} or \hyperlink{heap_8h_a8b28fcc0fffd2bddc380dd4b59468cef}{realloc()}. Otherwise, or if free(ptr) has already been called before, undefined behavior occurs. If ptr is N\-U\-L\-L, no opera‐ tion is performed. 

Definition at line 116 of file nova\-\_\-heap.\-c.

\hypertarget{nova__heap_8c_a8038c1ab330e938a5ec2337476e0b5b1}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!nova\-\_\-heap\-\_\-init@{nova\-\_\-heap\-\_\-init}}
\index{nova\-\_\-heap\-\_\-init@{nova\-\_\-heap\-\_\-init}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{nova\-\_\-heap\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void nova\-\_\-heap\-\_\-init (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{heap\-\_\-base, }
\item[{void $\ast$}]{heap\-\_\-end}
\end{DoxyParamCaption}
)}}\label{nova__heap_8c_a8038c1ab330e938a5ec2337476e0b5b1}


Initialize memory. 



Definition at line 33 of file nova\-\_\-heap.\-c.

\hypertarget{nova__heap_8c_a7d415ea038c9c1b91e25a4a5de381ed5}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!nova\-\_\-heap\-\_\-malloc@{nova\-\_\-heap\-\_\-malloc}}
\index{nova\-\_\-heap\-\_\-malloc@{nova\-\_\-heap\-\_\-malloc}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{nova\-\_\-heap\-\_\-malloc}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ nova\-\_\-heap\-\_\-malloc (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{nova__heap_8c_a7d415ea038c9c1b91e25a4a5de381ed5}
\hyperlink{heap_8h_a3b4debdfb967b69d84804fba8012bfcd}{malloc()} allocates size bytes and returns a pointer to the allocated memory. The memory is not cleared. If size is 0, then \hyperlink{heap_8h_a3b4debdfb967b69d84804fba8012bfcd}{malloc()} returns either N\-U\-L\-L, or a unique pointer value that can later be successfully passed to \hyperlink{heap_8h_a9f850d0608418aea291e4c0fdab93826}{free()}. 

Definition at line 55 of file nova\-\_\-heap.\-c.

\hypertarget{nova__heap_8c_ad6cb56200d8cbbbb7340bce80a289365}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!nova\-\_\-heap\-\_\-realloc@{nova\-\_\-heap\-\_\-realloc}}
\index{nova\-\_\-heap\-\_\-realloc@{nova\-\_\-heap\-\_\-realloc}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{nova\-\_\-heap\-\_\-realloc}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ nova\-\_\-heap\-\_\-realloc (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{p, }
\item[{size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{nova__heap_8c_ad6cb56200d8cbbbb7340bce80a289365}
\hyperlink{heap_8h_a8b28fcc0fffd2bddc380dd4b59468cef}{realloc()} changes the size of the memory block pointed to by ptr to size bytes. The contents will be unchanged to the minimum of the old and new sizes; newly allocated memory will be uninitialized. If ptr is N\-U\-L\-L, then the call is equivalent to mal‐ loc(size), for all values of size; if size is equal to zero, and ptr is not N\-U\-L\-L, then the call is equivalent to free(ptr). Unless ptr is N\-U\-L\-L, it must have been returned by an earlier call to \hyperlink{heap_8h_a3b4debdfb967b69d84804fba8012bfcd}{malloc()} or \hyperlink{heap_8h_a8b28fcc0fffd2bddc380dd4b59468cef}{realloc()}. If the area pointed to was moved, a free(ptr) is done. 

Definition at line 186 of file nova\-\_\-heap.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=268pt]{nova__heap_8c_ad6cb56200d8cbbbb7340bce80a289365_cgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{nova__heap_8c_a030aa741640330c5c035c1a9dfd6e87f}{\index{nova\-\_\-heap.\-c@{nova\-\_\-heap.\-c}!heap@{heap}}
\index{heap@{heap}!nova_heap.c@{nova\-\_\-heap.\-c}}
\subsubsection[{heap}]{\setlength{\rightskip}{0pt plus 5cm}{\bf heap\-\_\-t}$\ast$ heap = {\bf N\-U\-L\-L}\hspace{0.3cm}{\ttfamily [static]}}}\label{nova__heap_8c_a030aa741640330c5c035c1a9dfd6e87f}


Definition at line 25 of file nova\-\_\-heap.\-c.

