<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>CARIBOU RTOS: include/caribou/lib/mutex.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="icon.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CARIBOU RTOS
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">CARIBOU Real Time Operating System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_6b0f9bac46327b387d62e7f30bcfded3.html">caribou</a></li><li class="navelem"><a class="el" href="dir_2a2cde549943c3b4f939f95a8bd34225.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mutex.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="types_8h_source.html">caribou/kernel/types.h</a>&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mutex.h:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h__incl.png" border="0" usemap="#include_2caribou_2lib_2mutex_8h" alt=""/></div>
<map name="include_2caribou_2lib_2mutex_8h" id="include_2caribou_2lib_2mutex_8h">
<area shape="rect" id="node2" href="types_8h.html" title="caribou/kernel/types.h" alt="" coords="103,96,253,123"/><area shape="rect" id="node4" href="stdint_8h.html" title="stdint.h" alt="" coords="146,171,211,197"/><area shape="rect" id="node5" href="stddef_8h.html" title="stddef.h" alt="" coords="236,171,305,197"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h__dep__incl.png" border="0" usemap="#include_2caribou_2lib_2mutex_8hdep" alt=""/></div>
<map name="include_2caribou_2lib_2mutex_8hdep" id="include_2caribou_2lib_2mutex_8hdep">
<area shape="rect" id="node2" href="bytequeue_8h.html" title="include/caribou/lib\l/bytequeue.h" alt="" coords="166,97,292,138"/><area shape="rect" id="node4" href="caribou_8h.html" title="include/caribou.h" alt="" coords="281,277,401,304"/><area shape="rect" id="node9" href="queue_8h.html" title="include/caribou/lib\l/queue.h" alt="" coords="474,97,600,138"/><area shape="rect" id="node15" href="timer_8c.html" title="src/kernel/timer.c" alt="" coords="625,104,748,131"/><area shape="rect" id="node16" href="bitmap__heap_8c.html" title="src/lib/bitmap_heap.c" alt="" coords="772,104,919,131"/><area shape="rect" id="node17" href="mutex_8c.html" title="src/lib/mutex.c" alt="" coords="943,104,1051,131"/><area shape="rect" id="node3" href="uart_8h.html" title="include/caribou/dev\l/uart.h" alt="" coords="5,187,139,229"/><area shape="rect" id="node8" href="bytequeue_8c.html" title="src/lib/bytequeue.c" alt="" coords="215,195,347,221"/><area shape="rect" id="node6" href="stdio_8c.html" title="src/lib/stdio.c" alt="" coords="86,352,185,379"/><area shape="rect" id="node7" href="uart_8c.html" title="src/dev/uart.c" alt="" coords="110,277,212,304"/><area shape="rect" id="node5" href="caribou_8c.html" title="src/kernel/caribou.c" alt="" coords="273,352,408,379"/><area shape="rect" id="node10" href="semaphore_8h.html" title="include/caribou/lib\l/semaphore.h" alt="" coords="474,187,600,229"/><area shape="rect" id="node12" href="swi_8c.html" title="src/kernel/swi.c" alt="" coords="625,195,740,221"/><area shape="rect" id="node13" href="thread_8c.html" title="src/kernel/thread.c" alt="" coords="764,195,893,221"/><area shape="rect" id="node14" href="queue_8c.html" title="src/lib/queue.c" alt="" coords="919,195,1025,221"/><area shape="rect" id="node11" href="semaphore_8c.html" title="src/lib/semaphore.c" alt="" coords="469,277,604,304"/></map>
</div>
</div>
<p><a href="mutex_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a29451c2d92fc86a4892d64ee00f4ce93"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a29451c2d92fc86a4892d64ee00f4ce93">CARIBOU_MUTEX_F_NOYIELD</a>&#160;&#160;&#160;0x01	/* disable mutex yield on lock wait */</td></tr>
<tr class="separator:a29451c2d92fc86a4892d64ee00f4ce93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae94c03ed1f2097292b627c9451de0da3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#ae94c03ed1f2097292b627c9451de0da3">CARIBOU_MUTEX_F_RECURSIVE</a>&#160;&#160;&#160;0x02	/* the mutex is recursive within it's owner's thread */</td></tr>
<tr class="separator:ae94c03ed1f2097292b627c9451de0da3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df848c2b34e8f32d7090550bf247746"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a7df848c2b34e8f32d7090550bf247746">CARIBOU_MUTEX_DECL</a>(x)&#160;&#160;&#160;<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> x={<a class="el" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,0,0,0}</td></tr>
<tr class="separator:a7df848c2b34e8f32d7090550bf247746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7c5200b4568274e3b153f3519b1b3cd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#aa7c5200b4568274e3b153f3519b1b3cd">CARIBOU_MUTEX_DECL_F</a>(x, F)&#160;&#160;&#160;<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> x={<a class="el" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,0,F,0}</td></tr>
<tr class="separator:aa7c5200b4568274e3b153f3519b1b3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afde0756e467d45f547c1436609ef92de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#afde0756e467d45f547c1436609ef92de">CARIBOU_MUTEX_INIT</a>(thread, flags)&#160;&#160;&#160;{thread,0,flags,0}</td></tr>
<tr class="separator:afde0756e467d45f547c1436609ef92de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae1a96416877281401ea8b95f5fff742f"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#ae1a96416877281401ea8b95f5fff742f">spinlock_t</a></td></tr>
<tr class="separator:ae1a96416877281401ea8b95f5fff742f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4682d0d134a29405ae9097a3fbd9f7f8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a4682d0d134a29405ae9097a3fbd9f7f8">caribou_mutex_new</a> (uint8_t flags)</td></tr>
<tr class="memdesc:a4682d0d134a29405ae9097a3fbd9f7f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates and initialize a new instance of a <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> on the heap.  <a href="#a4682d0d134a29405ae9097a3fbd9f7f8">More...</a><br/></td></tr>
<tr class="separator:a4682d0d134a29405ae9097a3fbd9f7f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8674565c4d669d4f7aad15d9f95e05a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a8674565c4d669d4f7aad15d9f95e05a8">caribou_mutex_init</a> (<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *mutex, uint8_t flags)</td></tr>
<tr class="memdesc:a8674565c4d669d4f7aad15d9f95e05a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instances of <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> must be initialized. This is a convenience function to perform the proper initialization of a <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> structure. It is only recommended to use the CARIBOU initialization functions rather than accessing the structure members directly.  <a href="#a8674565c4d669d4f7aad15d9f95e05a8">More...</a><br/></td></tr>
<tr class="separator:a8674565c4d669d4f7aad15d9f95e05a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a15f0353e9e7b7760f7b3dad701dcb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#ae5a15f0353e9e7b7760f7b3dad701dcb">caribou_mutex_free</a> (<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:ae5a15f0353e9e7b7760f7b3dad701dcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a mutex that has been previously allocated on the heap by <a class="el" href="mutex_8c.html#a4682d0d134a29405ae9097a3fbd9f7f8" title="Allocates and initialize a new instance of a caribou_mutex_t on the heap. ">caribou_mutex_new()</a>.  <a href="#ae5a15f0353e9e7b7760f7b3dad701dcb">More...</a><br/></td></tr>
<tr class="separator:ae5a15f0353e9e7b7760f7b3dad701dcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c6e7d0d0ef0f6ab7f7f6ca023e248e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a6c6e7d0d0ef0f6ab7f7f6ca023e248e1">caribou_mutex_lock</a> (<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *mutex, uint32_t timeout)</td></tr>
<tr class="separator:a6c6e7d0d0ef0f6ab7f7f6ca023e248e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77dcbdc680c9e99c03da48358518c66f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a77dcbdc680c9e99c03da48358518c66f">caribou_mutex_trylock</a> (<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *mutex)</td></tr>
<tr class="separator:a77dcbdc680c9e99c03da48358518c66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b95526e1ffc3189a1c781dd09a823b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a06b95526e1ffc3189a1c781dd09a823b">caribou_mutex_unlock</a> (<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a06b95526e1ffc3189a1c781dd09a823b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock a mutex instance which was previously acquired with thread_mutex_lock() or thread_caribou_mutex_trylock() If there are other threads that are currently blocking on the mutex, then <a class="el" href="mutex_8c.html#a06b95526e1ffc3189a1c781dd09a823b" title="Unlock a mutex instance which was previously acquired with thread_mutex_lock() or thread_caribou_mute...">caribou_mutex_unlock()</a> will yield the thread after releasing the mutex, otherwise, if there are no other threads blocking on the mutex, then continue without yielding.  <a href="#a06b95526e1ffc3189a1c781dd09a823b">More...</a><br/></td></tr>
<tr class="separator:a06b95526e1ffc3189a1c781dd09a823b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63a68dd1805509e4589db845972bc542"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a63a68dd1805509e4589db845972bc542">caribou_mutex_locks</a> (<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *mutex)</td></tr>
<tr class="separator:a63a68dd1805509e4589db845972bc542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7952991c91c05b614ed4003ceb3e666e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a7952991c91c05b614ed4003ceb3e666e">caribou_mutex_flags</a> (<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a7952991c91c05b614ed4003ceb3e666e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queries the option flags associated with the specified mutex instance.  <a href="#a7952991c91c05b614ed4003ceb3e666e">More...</a><br/></td></tr>
<tr class="separator:a7952991c91c05b614ed4003ceb3e666e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7c354e198a8c2357ce22d49000f2aa5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#ac7c354e198a8c2357ce22d49000f2aa5">caribou_mutex_set_flags</a> (<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *mutex, uint8_t flags)</td></tr>
<tr class="memdesc:ac7c354e198a8c2357ce22d49000f2aa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the option flags associated with the specified mutex instance.  <a href="#ac7c354e198a8c2357ce22d49000f2aa5">More...</a><br/></td></tr>
<tr class="separator:ac7c354e198a8c2357ce22d49000f2aa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><hr/>
<dl class="section author"><dt>Author</dt><dd>Mike Sharkey <a href="#" onclick="location.href='mai'+'lto:'+'mik'+'e@'+'pik'+'ea'+'ero'+'.c'+'om'; return false;">mike@<span style="display: none;">.nosp@m.</span>pike<span style="display: none;">.nosp@m.</span>aero.<span style="display: none;">.nosp@m.</span>com</a>. </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>© 2005-2013 by Pike Aerospace Research Corporation </dd>
<dd>
© 2014-2015 by Mike Sharkey</dd></dl>
<p>This file is part of CARIBOU RTOS CARIBOU RTOS is free software: you can redistribute it and/or modify it under the terms of the Beerware License Version 43. "THE BEER-WARE LICENSE" (Revision 43): Mike Sharkey <a href="#" onclick="location.href='mai'+'lto:'+'mik'+'e@'+'pik'+'ea'+'ero'+'.c'+'om'; return false;">mike@<span style="display: none;">.nosp@m.</span>pike<span style="display: none;">.nosp@m.</span>aero.<span style="display: none;">.nosp@m.</span>com</a> wrote this file. As long as you retain this notice you can do whatever you want with this stuff. If we meet some day, and you think this stuff is worth it, you can buy me a beer in return ~ Mike Sharkey </p>

<p>Definition in file <a class="el" href="mutex_8h_source.html">mutex.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a7df848c2b34e8f32d7090550bf247746"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CARIBOU_MUTEX_DECL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> x={<a class="el" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,0,0,0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mutex_8h_source.html#l00038">38</a> of file <a class="el" href="mutex_8h_source.html">mutex.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa7c5200b4568274e3b153f3519b1b3cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CARIBOU_MUTEX_DECL_F</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">F&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> x={<a class="el" href="types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,0,F,0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mutex_8h_source.html#l00039">39</a> of file <a class="el" href="mutex_8h_source.html">mutex.h</a>.</p>

</div>
</div>
<a class="anchor" id="a29451c2d92fc86a4892d64ee00f4ce93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CARIBOU_MUTEX_F_NOYIELD&#160;&#160;&#160;0x01	/* disable mutex yield on lock wait */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mutex_8h_source.html#l00027">27</a> of file <a class="el" href="mutex_8h_source.html">mutex.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae94c03ed1f2097292b627c9451de0da3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CARIBOU_MUTEX_F_RECURSIVE&#160;&#160;&#160;0x02	/* the mutex is recursive within it's owner's thread */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mutex_8h_source.html#l00028">28</a> of file <a class="el" href="mutex_8h_source.html">mutex.h</a>.</p>

</div>
</div>
<a class="anchor" id="afde0756e467d45f547c1436609ef92de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CARIBOU_MUTEX_INIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">thread, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">flags&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;{thread,0,flags,0}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mutex_8h_source.html#l00040">40</a> of file <a class="el" href="mutex_8h_source.html">mutex.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ae1a96416877281401ea8b95f5fff742f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="mutex_8h.html#ae1a96416877281401ea8b95f5fff742f">spinlock_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="mutex_8h_source.html#l00025">25</a> of file <a class="el" href="mutex_8h_source.html">mutex.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7952991c91c05b614ed4003ceb3e666e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t caribou_mutex_flags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queries the option flags associated with the specified mutex instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>A pointer to a mutex instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The flags of the mutex instance. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The Current thread is locked for the duration of this operation. </dd></dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00203">203</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a7952991c91c05b614ed4003ceb3e666e_cgraph.png" border="0" usemap="#mutex_8h_a7952991c91c05b614ed4003ceb3e666e_cgraph" alt=""/></div>
<map name="mutex_8h_a7952991c91c05b614ed4003ceb3e666e_cgraph" id="mutex_8h_a7952991c91c05b614ed4003ceb3e666e_cgraph">
<area shape="rect" id="node2" href="thread_8h.html#a81ec8b7e5f2accca0c462337830fbdf5" title="Lock the current thread such that it will not yield CPU time until such time that the thread is unloc..." alt="" coords="204,5,343,32"/><area shape="rect" id="node3" href="thread_8h.html#a0b4d0cd341028e7713f6f0f60a018529" title="Unlock a thread which has been previously been locked with caribou_thread_lock() " alt="" coords="197,56,349,83"/><area shape="rect" id="node4" href="thread_8c.html#a09bcca24ab734199ef4456405771e2ad" title="The remainder of the scheduled time slots for the current thread are disposed and the next runnable t..." alt="" coords="397,56,539,83"/><area shape="rect" id="node5" href="caribou_8h.html#a8c39159ad641e81210c3307ab7d64227" title="Force scheduler to perform a context switch. " alt="" coords="587,56,706,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae5a15f0353e9e7b7760f7b3dad701dcb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void caribou_mutex_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a mutex that has been previously allocated on the heap by <a class="el" href="mutex_8c.html#a4682d0d134a29405ae9097a3fbd9f7f8" title="Allocates and initialize a new instance of a caribou_mutex_t on the heap. ">caribou_mutex_new()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>A pointer to the <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> instance to de-allocate from the heap. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00051">51</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_ae5a15f0353e9e7b7760f7b3dad701dcb_cgraph.png" border="0" usemap="#mutex_8h_ae5a15f0353e9e7b7760f7b3dad701dcb_cgraph" alt=""/></div>
<map name="mutex_8h_ae5a15f0353e9e7b7760f7b3dad701dcb_cgraph" id="mutex_8h_ae5a15f0353e9e7b7760f7b3dad701dcb_cgraph">
<area shape="rect" id="node2" href="heap_8h.html#a9f850d0608418aea291e4c0fdab93826" title="free" alt="" coords="190,5,234,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8674565c4d669d4f7aad15d9f95e05a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void caribou_mutex_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instances of <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> must be initialized. This is a convenience function to perform the proper initialization of a <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> structure. It is only recommended to use the CARIBOU initialization functions rather than accessing the structure members directly. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>A pointer to the <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> instance to initialize. </td></tr>
    <tr><td class="paramname">flags</td><td>Initial mutex flags to apply. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00066">66</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a8674565c4d669d4f7aad15d9f95e05a8_cgraph.png" border="0" usemap="#mutex_8h_a8674565c4d669d4f7aad15d9f95e05a8_cgraph" alt=""/></div>
<map name="mutex_8h_a8674565c4d669d4f7aad15d9f95e05a8_cgraph" id="mutex_8h_a8674565c4d669d4f7aad15d9f95e05a8_cgraph">
<area shape="rect" id="node2" href="string_8h.html#a65e9690a5901c7d1eaa0adf6c7c10b4c" title="The memset() function fills the first n bytes of the memory area pointed to by dest with the constant..." alt="" coords="184,5,253,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a8674565c4d669d4f7aad15d9f95e05a8_icgraph.png" border="0" usemap="#mutex_8h_a8674565c4d669d4f7aad15d9f95e05a8_icgraph" alt=""/></div>
<map name="mutex_8h_a8674565c4d669d4f7aad15d9f95e05a8_icgraph" id="mutex_8h_a8674565c4d669d4f7aad15d9f95e05a8_icgraph">
<area shape="rect" id="node2" href="mutex_8c.html#a4682d0d134a29405ae9097a3fbd9f7f8" title="Allocates and initialize a new instance of a caribou_mutex_t on the heap. " alt="" coords="184,5,323,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c6e7d0d0ef0f6ab7f7f6ca023e248e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> caribou_mutex_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to acquire lock. If the mutex is currently held, the calling thread will block unless the current thread is the holder of the current lock. If the current already holds the lock, then a new lock will be granted if the CARIBOU_MUTEX_F_RECURSIVE flasg is set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to in instance of a <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> structure. </td></tr>
    <tr><td class="paramname">timeout</td><td>The timeout to wait in milliseconds, or forever if zero. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the lock was acquired. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the current thread currently holds a lock on the mutex, then a new lock will be granted, however, in order to release the lock completely such that it may be acquired by another thread, then <a class="el" href="mutex_8c.html#a06b95526e1ffc3189a1c781dd09a823b" title="Unlock a mutex instance which was previously acquired with thread_mutex_lock() or thread_caribou_mute...">caribou_mutex_unlock()</a> must be called a number of time equal to the number of times a lock was acquired by the same (current) thread. </dd></dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00084">84</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a6c6e7d0d0ef0f6ab7f7f6ca023e248e1_cgraph.png" border="0" usemap="#mutex_8h_a6c6e7d0d0ef0f6ab7f7f6ca023e248e1_cgraph" alt=""/></div>
<map name="mutex_8h_a6c6e7d0d0ef0f6ab7f7f6ca023e248e1_cgraph" id="mutex_8h_a6c6e7d0d0ef0f6ab7f7f6ca023e248e1_cgraph">
<area shape="rect" id="node2" href="thread_8h.html#a81ec8b7e5f2accca0c462337830fbdf5" title="Lock the current thread such that it will not yield CPU time until such time that the thread is unloc..." alt="" coords="947,44,1085,71"/><area shape="rect" id="node3" href="thread_8h.html#a0b4d0cd341028e7713f6f0f60a018529" title="Unlock a thread which has been previously been locked with caribou_thread_lock() " alt="" coords="940,95,1092,121"/><area shape="rect" id="node6" href="timer_8h.html#aae6ec887f8433688572e15aa31358cad" title="Set the period of the specified timer. " alt="" coords="204,145,329,172"/><area shape="rect" id="node9" href="thread_8h.html#a09bcca24ab734199ef4456405771e2ad" title="The remainder of the scheduled time slots for the current thread are disposed and the next runnable t..." alt="" coords="945,196,1087,223"/><area shape="rect" id="node10" href="timer_8h.html#a53167bc3176eb8b8558960022da4b347" title="caribou_timer_init" alt="" coords="205,297,329,324"/><area shape="rect" id="node14" href="mutex_8c.html#a77dcbdc680c9e99c03da48358518c66f" title="caribou_mutex_trylock" alt="" coords="737,44,890,71"/><area shape="rect" id="node15" href="timer_8h.html#ab84793cb51da82b84f9bcf0f3e2d8a38" title="The caribou_timer_expired() function is used to determine if a timer has expired. ..." alt="" coords="192,449,341,476"/><area shape="rect" id="node4" href="thread_8c.html#a09bcca24ab734199ef4456405771e2ad" title="The remainder of the scheduled time slots for the current thread are disposed and the next runnable t..." alt="" coords="1141,108,1283,135"/><area shape="rect" id="node5" href="caribou_8h.html#a8c39159ad641e81210c3307ab7d64227" title="Force scheduler to perform a context switch. " alt="" coords="1331,140,1450,167"/><area shape="rect" id="node7" href="mutex_8h.html#a06b95526e1ffc3189a1c781dd09a823b" title="Unlock a mutex instance which was previously acquired with thread_mutex_lock() or thread_caribou_mute..." alt="" coords="737,145,889,172"/><area shape="rect" id="node8" href="thread_8h.html#a57862b2b48ff010a38d00f9138ff9696" title="caribou_thread_current" alt="" coords="939,145,1093,172"/><area shape="rect" id="node11" href="string_8h.html#a65e9690a5901c7d1eaa0adf6c7c10b4c" title="The memset() function fills the first n bytes of the memory area pointed to by dest with the constant..." alt="" coords="423,297,492,324"/><area shape="rect" id="node12" href="timer_8c.html#a5babbe97ea4c2cfdf56ae5910d6a1d21" title="append_timer_node" alt="" coords="390,247,525,273"/><area shape="rect" id="node13" href="timer_8c.html#ad60ea161d718bbcb2da9e2c2820005e5" title="find_timer_node" alt="" coords="573,196,688,223"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a6c6e7d0d0ef0f6ab7f7f6ca023e248e1_icgraph.png" border="0" usemap="#mutex_8h_a6c6e7d0d0ef0f6ab7f7f6ca023e248e1_icgraph" alt=""/></div>
<map name="mutex_8h_a6c6e7d0d0ef0f6ab7f7f6ca023e248e1_icgraph" id="mutex_8h_a6c6e7d0d0ef0f6ab7f7f6ca023e248e1_icgraph">
<area shape="rect" id="node2" href="uart_8c.html#a6785984108285b4b070fcedc0e742726" title="Open a UART device for subsequent use. " alt="" coords="1109,70,1237,96"/><area shape="rect" id="node4" href="uart_8c.html#a69c58ec3847a900168737c43dec3fcbc" title="Close a previously opened UART. " alt="" coords="920,44,1051,71"/><area shape="rect" id="node6" href="timer_8c.html#ad60ea161d718bbcb2da9e2c2820005e5" title="find_timer_node" alt="" coords="192,272,307,299"/><area shape="rect" id="node7" href="timer_8c.html#a5babbe97ea4c2cfdf56ae5910d6a1d21" title="append_timer_node" alt="" coords="355,247,490,274"/><area shape="rect" id="node11" href="timer_8c.html#a4efa9bcdfbb2f7b93d104ab1d6a3f8a6" title="remove_timer_node" alt="" coords="917,323,1053,350"/><area shape="rect" id="node12" href="timer_8c.html#ab4d53bf750af4477abae9e82f0419265" title="Dispose of a timer instance associated with a thread. " alt="" coords="1102,272,1245,299"/><area shape="rect" id="node18" href="timer_8c.html#aae6ec887f8433688572e15aa31358cad" title="Set the period of the specified timer. " alt="" coords="923,222,1048,248"/><area shape="rect" id="node19" href="timer_8c.html#ae91992e348922aa6cad60eaed72ffb33" title="Reset the period of the specified timer. " alt="" coords="917,463,1053,490"/><area shape="rect" id="node20" href="timer_8c.html#ada2788a909d6faf0397671cf9f775e01" title="Used by CARIBOU to process timers during the main thread idle loop. " alt="" coords="922,374,1049,400"/><area shape="rect" id="node3" href="stdio_8c.html#a7b263746ba51b8ad63b1a6fa0d8aa964" title="fopen" alt="" coords="1347,70,1402,96"/><area shape="rect" id="node5" href="stdio_8c.html#a3abd78c220b4b49d1b088f0dfe40bf23" title="fclose" alt="" coords="1145,19,1202,46"/><area shape="rect" id="node8" href="timer_8c.html#ace2850a12ae1873a6707e74692f1526e" title="Instantiate a new timer on the heap memory, and associate it with the current thread. &#160;timerfn The timer callback function. " alt="" coords="539,247,682,274"/><area shape="rect" id="node9" href="timer_8c.html#a53167bc3176eb8b8558960022da4b347" title="caribou_timer_init" alt="" coords="549,298,673,324"/><area shape="rect" id="node10" href="mutex_8c.html#a6c6e7d0d0ef0f6ab7f7f6ca023e248e1" title="caribou_mutex_lock" alt="" coords="731,272,869,299"/><area shape="rect" id="node13" href="timer_8c.html#a2fb2be42014552a26baec4de547fbbb3" title="Dispose of all timer instances associated with a thread. " alt="" coords="1293,286,1456,312"/><area shape="rect" id="node14" href="thread_8c.html#a005298b8a4907a4f4523925d7ed1a8f4" title="Schedules a thread to be terminate upon the next execution of the main thread idle loop..." alt="" coords="1504,292,1672,319"/><area shape="rect" id="node15" href="thread_8c.html#aa85093539f7bb9e2c7124a2011e60279" title="wait for interrupt " alt="" coords="1721,320,1863,347"/><area shape="rect" id="node16" href="thread_8c.html#aee74a4ed56dec09a5acd9ce8b57de9d8" title="Enter into the main thread execution loop. This function does not return. This function should be cal..." alt="" coords="1913,320,2055,347"/><area shape="rect" id="node17" href="caribou_8c.html#a9a6ffa8babf5f0ea286bda1e464d7623" title="The CARIBOU main thread loop. caribou_exec() does not return. " alt="" coords="2104,320,2203,347"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a63a68dd1805509e4589db845972bc542"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t caribou_mutex_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the number of locks held by the thread which is currently holding the lock in the case where CARIBOU_MUTEX_F_RECURSIVE flag is used this number can be &gt; 1. </dd></dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00188">188</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a63a68dd1805509e4589db845972bc542_cgraph.png" border="0" usemap="#mutex_8h_a63a68dd1805509e4589db845972bc542_cgraph" alt=""/></div>
<map name="mutex_8h_a63a68dd1805509e4589db845972bc542_cgraph" id="mutex_8h_a63a68dd1805509e4589db845972bc542_cgraph">
<area shape="rect" id="node2" href="thread_8h.html#a81ec8b7e5f2accca0c462337830fbdf5" title="Lock the current thread such that it will not yield CPU time until such time that the thread is unloc..." alt="" coords="207,5,345,32"/><area shape="rect" id="node3" href="thread_8h.html#a0b4d0cd341028e7713f6f0f60a018529" title="Unlock a thread which has been previously been locked with caribou_thread_lock() " alt="" coords="200,56,352,83"/><area shape="rect" id="node4" href="thread_8c.html#a09bcca24ab734199ef4456405771e2ad" title="The remainder of the scheduled time slots for the current thread are disposed and the next runnable t..." alt="" coords="400,56,541,83"/><area shape="rect" id="node5" href="caribou_8h.html#a8c39159ad641e81210c3307ab7d64227" title="Force scheduler to perform a context switch. " alt="" coords="590,56,709,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4682d0d134a29405ae9097a3fbd9f7f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a>* caribou_mutex_new </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates and initialize a new instance of a <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> on the heap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>Mutex flags to apply initially o the mutex. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to newly allocated mutex or NULL. note If NULL is returned, then errno is set. </dd></dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00032">32</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a4682d0d134a29405ae9097a3fbd9f7f8_cgraph.png" border="0" usemap="#mutex_8h_a4682d0d134a29405ae9097a3fbd9f7f8_cgraph" alt=""/></div>
<map name="mutex_8h_a4682d0d134a29405ae9097a3fbd9f7f8_cgraph" id="mutex_8h_a4682d0d134a29405ae9097a3fbd9f7f8_cgraph">
<area shape="rect" id="node2" href="heap_8h.html#a3b4debdfb967b69d84804fba8012bfcd" title="malloc" alt="" coords="227,5,287,32"/><area shape="rect" id="node3" href="mutex_8c.html#a8674565c4d669d4f7aad15d9f95e05a8" title="Instances of caribou_mutex_t must be initialized. This is a convenience function to perform the prope..." alt="" coords="192,56,323,83"/><area shape="rect" id="node4" href="string_8h.html#a65e9690a5901c7d1eaa0adf6c7c10b4c" title="The memset() function fills the first n bytes of the memory area pointed to by dest with the constant..." alt="" coords="371,56,440,83"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac7c354e198a8c2357ce22d49000f2aa5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void caribou_mutex_set_flags </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the option flags associated with the specified mutex instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>A pointer to a mutex instance. </td></tr>
    <tr><td class="paramname">flags</td><td>The flags to set/reset. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The flags of the mutex instance. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>The Current thread is locked for the duration of this operation. </dd></dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00219">219</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_ac7c354e198a8c2357ce22d49000f2aa5_cgraph.png" border="0" usemap="#mutex_8h_ac7c354e198a8c2357ce22d49000f2aa5_cgraph" alt=""/></div>
<map name="mutex_8h_ac7c354e198a8c2357ce22d49000f2aa5_cgraph" id="mutex_8h_ac7c354e198a8c2357ce22d49000f2aa5_cgraph">
<area shape="rect" id="node2" href="thread_8h.html#a81ec8b7e5f2accca0c462337830fbdf5" title="Lock the current thread such that it will not yield CPU time until such time that the thread is unloc..." alt="" coords="228,5,367,32"/><area shape="rect" id="node3" href="thread_8h.html#a0b4d0cd341028e7713f6f0f60a018529" title="Unlock a thread which has been previously been locked with caribou_thread_lock() " alt="" coords="221,56,373,83"/><area shape="rect" id="node4" href="thread_8c.html#a09bcca24ab734199ef4456405771e2ad" title="The remainder of the scheduled time slots for the current thread are disposed and the next runnable t..." alt="" coords="421,56,563,83"/><area shape="rect" id="node5" href="caribou_8h.html#a8c39159ad641e81210c3307ab7d64227" title="Force scheduler to perform a context switch. " alt="" coords="611,56,730,83"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_ac7c354e198a8c2357ce22d49000f2aa5_icgraph.png" border="0" usemap="#mutex_8h_ac7c354e198a8c2357ce22d49000f2aa5_icgraph" alt=""/></div>
<map name="mutex_8h_ac7c354e198a8c2357ce22d49000f2aa5_icgraph" id="mutex_8h_ac7c354e198a8c2357ce22d49000f2aa5_icgraph">
<area shape="rect" id="node2" href="bitmap__heap_8c.html#a08777b2b8d18a810225369fa1c671765" title="Initialize an area of memory for heap use. " alt="" coords="221,5,341,32"/><area shape="rect" id="node3" href="kheap_8c.html#a76f1495a86311156123a7f2870013e62" title="kheap_init" alt="" coords="390,5,471,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a77dcbdc680c9e99c03da48358518c66f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> caribou_mutex_trylock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to acquire a mutex lock without blocking. If the mutex is currently held, the calling thread will not block, however, <a class="el" href="mutex_8c.html#a77dcbdc680c9e99c03da48358518c66f">caribou_mutex_trylock()</a> will return false, and the lock will not have been acquired by the calling thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>pointer to in instance of a <a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the lock was acquired. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>If the current thread currently holds a lock on the mutex, then a new lock will be granted, however, in order to release the lock completely such that it may be acquired by another thread, then <a class="el" href="mutex_8c.html#a06b95526e1ffc3189a1c781dd09a823b" title="Unlock a mutex instance which was previously acquired with thread_mutex_lock() or thread_caribou_mute...">caribou_mutex_unlock()</a> must be called a number of time equal to the number of times a lock was acquired by the same (current) thread. </dd></dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00118">118</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a77dcbdc680c9e99c03da48358518c66f_cgraph.png" border="0" usemap="#mutex_8h_a77dcbdc680c9e99c03da48358518c66f_cgraph" alt=""/></div>
<map name="mutex_8h_a77dcbdc680c9e99c03da48358518c66f_cgraph" id="mutex_8h_a77dcbdc680c9e99c03da48358518c66f_cgraph">
<area shape="rect" id="node2" href="thread_8h.html#a57862b2b48ff010a38d00f9138ff9696" title="caribou_thread_current" alt="" coords="208,5,363,32"/><area shape="rect" id="node3" href="thread_8h.html#a81ec8b7e5f2accca0c462337830fbdf5" title="Lock the current thread such that it will not yield CPU time until such time that the thread is unloc..." alt="" coords="216,56,355,83"/><area shape="rect" id="node4" href="thread_8h.html#a0b4d0cd341028e7713f6f0f60a018529" title="Unlock a thread which has been previously been locked with caribou_thread_lock() " alt="" coords="209,107,361,133"/><area shape="rect" id="node5" href="thread_8c.html#a09bcca24ab734199ef4456405771e2ad" title="The remainder of the scheduled time slots for the current thread are disposed and the next runnable t..." alt="" coords="411,107,552,133"/><area shape="rect" id="node6" href="caribou_8h.html#a8c39159ad641e81210c3307ab7d64227" title="Force scheduler to perform a context switch. " alt="" coords="601,107,719,133"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a77dcbdc680c9e99c03da48358518c66f_icgraph.png" border="0" usemap="#mutex_8h_a77dcbdc680c9e99c03da48358518c66f_icgraph" alt=""/></div>
<map name="mutex_8h_a77dcbdc680c9e99c03da48358518c66f_icgraph" id="mutex_8h_a77dcbdc680c9e99c03da48358518c66f_icgraph">
<area shape="rect" id="node2" href="mutex_8c.html#a6c6e7d0d0ef0f6ab7f7f6ca023e248e1" title="caribou_mutex_lock" alt="" coords="208,259,347,285"/><area shape="rect" id="node3" href="uart_8c.html#a6785984108285b4b070fcedc0e742726" title="Open a UART device for subsequent use. " alt="" coords="587,5,715,32"/><area shape="rect" id="node5" href="uart_8c.html#a69c58ec3847a900168737c43dec3fcbc" title="Close a previously opened UART. " alt="" coords="397,56,528,83"/><area shape="rect" id="node7" href="timer_8c.html#ad60ea161d718bbcb2da9e2c2820005e5" title="find_timer_node" alt="" coords="405,107,520,133"/><area shape="rect" id="node8" href="timer_8c.html#a5babbe97ea4c2cfdf56ae5910d6a1d21" title="append_timer_node" alt="" coords="583,157,718,184"/><area shape="rect" id="node11" href="timer_8c.html#a4efa9bcdfbb2f7b93d104ab1d6a3f8a6" title="remove_timer_node" alt="" coords="395,309,531,336"/><area shape="rect" id="node12" href="timer_8c.html#ab4d53bf750af4477abae9e82f0419265" title="Dispose of a timer instance associated with a thread. " alt="" coords="579,360,722,387"/><area shape="rect" id="node18" href="timer_8c.html#aae6ec887f8433688572e15aa31358cad" title="Set the period of the specified timer. " alt="" coords="400,259,525,285"/><area shape="rect" id="node19" href="timer_8c.html#ae91992e348922aa6cad60eaed72ffb33" title="Reset the period of the specified timer. " alt="" coords="395,360,531,387"/><area shape="rect" id="node20" href="timer_8c.html#ada2788a909d6faf0397671cf9f775e01" title="Used by CARIBOU to process timers during the main thread idle loop. " alt="" coords="1002,449,1129,476"/><area shape="rect" id="node4" href="stdio_8c.html#a7b263746ba51b8ad63b1a6fa0d8aa964" title="fopen" alt="" coords="825,5,879,32"/><area shape="rect" id="node6" href="stdio_8c.html#a3abd78c220b4b49d1b088f0dfe40bf23" title="fclose" alt="" coords="622,56,679,83"/><area shape="rect" id="node9" href="timer_8c.html#ace2850a12ae1873a6707e74692f1526e" title="Instantiate a new timer on the heap memory, and associate it with the current thread. &#160;timerfn The timer callback function. " alt="" coords="781,157,923,184"/><area shape="rect" id="node10" href="timer_8c.html#a53167bc3176eb8b8558960022da4b347" title="caribou_timer_init" alt="" coords="790,208,914,235"/><area shape="rect" id="node13" href="timer_8c.html#a2fb2be42014552a26baec4de547fbbb3" title="Dispose of all timer instances associated with a thread. " alt="" coords="771,385,933,412"/><area shape="rect" id="node14" href="thread_8c.html#a005298b8a4907a4f4523925d7ed1a8f4" title="Schedules a thread to be terminate upon the next execution of the main thread idle loop..." alt="" coords="981,392,1149,419"/><area shape="rect" id="node15" href="thread_8c.html#aa85093539f7bb9e2c7124a2011e60279" title="wait for interrupt " alt="" coords="1198,421,1341,448"/><area shape="rect" id="node16" href="thread_8c.html#aee74a4ed56dec09a5acd9ce8b57de9d8" title="Enter into the main thread execution loop. This function does not return. This function should be cal..." alt="" coords="1390,421,1533,448"/><area shape="rect" id="node17" href="caribou_8c.html#a9a6ffa8babf5f0ea286bda1e464d7623" title="The CARIBOU main thread loop. caribou_exec() does not return. " alt="" coords="1581,421,1680,448"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a06b95526e1ffc3189a1c781dd09a823b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> caribou_mutex_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcaribou__mutex__t.html">caribou_mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock a mutex instance which was previously acquired with thread_mutex_lock() or thread_caribou_mutex_trylock() If there are other threads that are currently blocking on the mutex, then <a class="el" href="mutex_8c.html#a06b95526e1ffc3189a1c781dd09a823b" title="Unlock a mutex instance which was previously acquired with thread_mutex_lock() or thread_caribou_mute...">caribou_mutex_unlock()</a> will yield the thread after releasing the mutex, otherwise, if there are no other threads blocking on the mutex, then continue without yielding. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>A mutex instance which was previously locked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Boolean, true if the lock was released, otherwise false. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>A mutex can only be unlocked by the thread which locked it. </dd></dl>

<p>Definition at line <a class="el" href="mutex_8c_source.html#l00158">158</a> of file <a class="el" href="mutex_8c_source.html">mutex.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a06b95526e1ffc3189a1c781dd09a823b_cgraph.png" border="0" usemap="#mutex_8h_a06b95526e1ffc3189a1c781dd09a823b_cgraph" alt=""/></div>
<map name="mutex_8h_a06b95526e1ffc3189a1c781dd09a823b_cgraph" id="mutex_8h_a06b95526e1ffc3189a1c781dd09a823b_cgraph">
<area shape="rect" id="node2" href="thread_8h.html#a81ec8b7e5f2accca0c462337830fbdf5" title="Lock the current thread such that it will not yield CPU time until such time that the thread is unloc..." alt="" coords="213,5,352,32"/><area shape="rect" id="node3" href="thread_8h.html#a57862b2b48ff010a38d00f9138ff9696" title="caribou_thread_current" alt="" coords="205,56,360,83"/><area shape="rect" id="node4" href="thread_8h.html#a0b4d0cd341028e7713f6f0f60a018529" title="Unlock a thread which has been previously been locked with caribou_thread_lock() " alt="" coords="207,107,359,133"/><area shape="rect" id="node7" href="thread_8h.html#a09bcca24ab734199ef4456405771e2ad" title="The remainder of the scheduled time slots for the current thread are disposed and the next runnable t..." alt="" coords="408,157,549,184"/><area shape="rect" id="node5" href="thread_8c.html#a09bcca24ab734199ef4456405771e2ad" title="The remainder of the scheduled time slots for the current thread are disposed and the next runnable t..." alt="" coords="408,107,549,133"/><area shape="rect" id="node6" href="caribou_8h.html#a8c39159ad641e81210c3307ab7d64227" title="Force scheduler to perform a context switch. " alt="" coords="598,132,717,159"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="mutex_8h_a06b95526e1ffc3189a1c781dd09a823b_icgraph.png" border="0" usemap="#mutex_8h_a06b95526e1ffc3189a1c781dd09a823b_icgraph" alt=""/></div>
<map name="mutex_8h_a06b95526e1ffc3189a1c781dd09a823b_icgraph" id="mutex_8h_a06b95526e1ffc3189a1c781dd09a823b_icgraph">
<area shape="rect" id="node2" href="uart_8c.html#a6785984108285b4b070fcedc0e742726" title="Open a UART device for subsequent use. " alt="" coords="1123,70,1251,96"/><area shape="rect" id="node4" href="uart_8c.html#a69c58ec3847a900168737c43dec3fcbc" title="Close a previously opened UART. " alt="" coords="933,44,1064,71"/><area shape="rect" id="node6" href="timer_8c.html#ad60ea161d718bbcb2da9e2c2820005e5" title="find_timer_node" alt="" coords="205,272,320,299"/><area shape="rect" id="node7" href="timer_8c.html#a5babbe97ea4c2cfdf56ae5910d6a1d21" title="append_timer_node" alt="" coords="369,247,503,274"/><area shape="rect" id="node11" href="timer_8c.html#a4efa9bcdfbb2f7b93d104ab1d6a3f8a6" title="remove_timer_node" alt="" coords="931,323,1067,350"/><area shape="rect" id="node12" href="timer_8c.html#ab4d53bf750af4477abae9e82f0419265" title="Dispose of a timer instance associated with a thread. " alt="" coords="1115,272,1258,299"/><area shape="rect" id="node18" href="timer_8c.html#aae6ec887f8433688572e15aa31358cad" title="Set the period of the specified timer. " alt="" coords="936,222,1061,248"/><area shape="rect" id="node19" href="timer_8c.html#ae91992e348922aa6cad60eaed72ffb33" title="Reset the period of the specified timer. " alt="" coords="931,463,1067,490"/><area shape="rect" id="node20" href="timer_8c.html#ada2788a909d6faf0397671cf9f775e01" title="Used by CARIBOU to process timers during the main thread idle loop. " alt="" coords="935,374,1062,400"/><area shape="rect" id="node3" href="stdio_8c.html#a7b263746ba51b8ad63b1a6fa0d8aa964" title="fopen" alt="" coords="1361,70,1415,96"/><area shape="rect" id="node5" href="stdio_8c.html#a3abd78c220b4b49d1b088f0dfe40bf23" title="fclose" alt="" coords="1158,19,1215,46"/><area shape="rect" id="node8" href="timer_8c.html#ace2850a12ae1873a6707e74692f1526e" title="Instantiate a new timer on the heap memory, and associate it with the current thread. &#160;timerfn The timer callback function. " alt="" coords="553,247,695,274"/><area shape="rect" id="node9" href="timer_8c.html#a53167bc3176eb8b8558960022da4b347" title="caribou_timer_init" alt="" coords="562,298,686,324"/><area shape="rect" id="node10" href="mutex_8c.html#a6c6e7d0d0ef0f6ab7f7f6ca023e248e1" title="caribou_mutex_lock" alt="" coords="744,272,883,299"/><area shape="rect" id="node13" href="timer_8c.html#a2fb2be42014552a26baec4de547fbbb3" title="Dispose of all timer instances associated with a thread. " alt="" coords="1307,286,1469,312"/><area shape="rect" id="node14" href="thread_8c.html#a005298b8a4907a4f4523925d7ed1a8f4" title="Schedules a thread to be terminate upon the next execution of the main thread idle loop..." alt="" coords="1517,292,1685,319"/><area shape="rect" id="node15" href="thread_8c.html#aa85093539f7bb9e2c7124a2011e60279" title="wait for interrupt " alt="" coords="1734,320,1877,347"/><area shape="rect" id="node16" href="thread_8c.html#aee74a4ed56dec09a5acd9ce8b57de9d8" title="Enter into the main thread execution loop. This function does not return. This function should be cal..." alt="" coords="1926,320,2069,347"/><area shape="rect" id="node17" href="caribou_8c.html#a9a6ffa8babf5f0ea286bda1e464d7623" title="The CARIBOU main thread loop. caribou_exec() does not return. " alt="" coords="2117,320,2216,347"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 29 2016 12:44:04 for CARIBOU RTOS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
