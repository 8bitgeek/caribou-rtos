\hypertarget{heap_8c}{\section{src/lib/heap.c File Reference}
\label{heap_8c}\index{src/lib/heap.\-c@{src/lib/heap.\-c}}
}
{\ttfamily \#include $<$caribou/lib/heap.\-h$>$}\\*
Include dependency graph for heap.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=305pt]{heap_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{heap_8c_af9aace1b44b73111e15aa39f06f43456}{\-\_\-\-\_\-attribute\-\_\-\-\_\-} ((weak))
\item 
void \hyperlink{heap_8c_af50bdf5542fa0191f84e75165f30e31c}{heap\-\_\-init} (void $\ast$heap\-\_\-base, void $\ast$heap\-\_\-end)
\begin{DoxyCompactList}\small\item\em Initialize memory. \end{DoxyCompactList}\item 
int16\-\_\-t \hyperlink{heap_8c_a2cef40244ac137adf9e95ddc0aaced37}{heap\-\_\-block\-\_\-size} ()
\begin{DoxyCompactList}\small\item\em the number of bytes per block \end{DoxyCompactList}\item 
int16\-\_\-t \hyperlink{heap_8c_ab1ae7675c875d925b42d6e99d4e7c096}{heap\-\_\-blocks\-\_\-allocated} ()
\begin{DoxyCompactList}\small\item\em total up all the blocks used. \end{DoxyCompactList}\item 
int32\-\_\-t \hyperlink{heap_8c_ae90ef9a2898ebd56b63f3c69722a11c3}{heap\-\_\-bytes\-\_\-used} ()
\item 
int32\-\_\-t \hyperlink{heap_8c_a792289a6840e798dc757b886bdf710a0}{heap\-\_\-bytes\-\_\-free} ()
\item 
void $\ast$ \hyperlink{heap_8c_a7ac38fce3243a7dcf448301ee9ffd392}{malloc} (size\-\_\-t size)
\item 
void $\ast$ \hyperlink{heap_8c_aa3cfaf307c4cdf46df247dcd3a0416f5}{realloc} (void $\ast$pointer, size\-\_\-t size)
\item 
void $\ast$ \hyperlink{heap_8c_a62b7798461bd461da64c5f9d35feddf7}{calloc} (size\-\_\-t nmemb, size\-\_\-t size)
\item 
void \hyperlink{heap_8c_a019c98a43fec3993d2260e84c11341fd}{free} (void $\ast$pointer)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint32\-\_\-t \hyperlink{heap_8c_a48785c93bbc92c3bd4d36645c981d48a}{\-\_\-\-\_\-heap\-\_\-start\-\_\-\-\_\-}
\begin{DoxyCompactList}\small\item\em H\-E\-A\-P segment start. \end{DoxyCompactList}\item 
uint32\-\_\-t \hyperlink{heap_8c_a2c60276ce265f5ea95b8d367ce0e28bf}{\-\_\-\-\_\-heap\-\_\-end\-\_\-\-\_\-}
\begin{DoxyCompactList}\small\item\em H\-E\-A\-P segment end. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{heap_8c_af9aace1b44b73111e15aa39f06f43456}{\index{heap.\-c@{heap.\-c}!\-\_\-\-\_\-attribute\-\_\-\-\_\-@{\-\_\-\-\_\-attribute\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-attribute\-\_\-\-\_\-@{\-\_\-\-\_\-attribute\-\_\-\-\_\-}!heap.c@{heap.\-c}}
\subsubsection[{\-\_\-\-\_\-attribute\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}\-\_\-\-\_\-attribute\-\_\-\-\_\- (
\begin{DoxyParamCaption}
\item[{(weak)}]{}
\end{DoxyParamCaption}
)}}\label{heap_8c_af9aace1b44b73111e15aa39f06f43456}
notify memory allocated

notify memory free'd

notify invalid free'd

notify invalid realloc'd

notify invalid alloc'd 

Definition at line 30 of file heap.\-c.

\hypertarget{heap_8c_a62b7798461bd461da64c5f9d35feddf7}{\index{heap.\-c@{heap.\-c}!calloc@{calloc}}
\index{calloc@{calloc}!heap.c@{heap.\-c}}
\subsubsection[{calloc}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ calloc (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{nmemb, }
\item[{size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{heap_8c_a62b7798461bd461da64c5f9d35feddf7}
The \hyperlink{heap_8c_a62b7798461bd461da64c5f9d35feddf7}{calloc()} function allocates memory for an array of nmemb elements of size bytes each and returns a pointer to the allocated memory. The memory is set to zero. If nmemb or size is 0, then \hyperlink{heap_8c_a62b7798461bd461da64c5f9d35feddf7}{calloc()} returns either N\-U\-L\-L, or a unique pointer value that can later be successfully passed to \hyperlink{heap_8c_a019c98a43fec3993d2260e84c11341fd}{free()}. 

Definition at line 176 of file heap.\-c.

\hypertarget{heap_8c_a019c98a43fec3993d2260e84c11341fd}{\index{heap.\-c@{heap.\-c}!free@{free}}
\index{free@{free}!heap.c@{heap.\-c}}
\subsubsection[{free}]{\setlength{\rightskip}{0pt plus 5cm}void free (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pointer}
\end{DoxyParamCaption}
)}}\label{heap_8c_a019c98a43fec3993d2260e84c11341fd}
\hyperlink{heap_8c_a019c98a43fec3993d2260e84c11341fd}{free()} frees the memory space pointed to by ptr, which must have been returned by a previous call to \hyperlink{heap_8c_a7ac38fce3243a7dcf448301ee9ffd392}{malloc()} or \hyperlink{heap_8c_aa3cfaf307c4cdf46df247dcd3a0416f5}{realloc()}. Otherwise, or if free(ptr) has already been called before, undefined behavior occurs. If ptr is N\-U\-L\-L, no opera‐ tion is performed. 

Definition at line 186 of file heap.\-c.



Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{heap_8c_a019c98a43fec3993d2260e84c11341fd_icgraph}
\end{center}
\end{figure}


\hypertarget{heap_8c_a2cef40244ac137adf9e95ddc0aaced37}{\index{heap.\-c@{heap.\-c}!heap\-\_\-block\-\_\-size@{heap\-\_\-block\-\_\-size}}
\index{heap\-\_\-block\-\_\-size@{heap\-\_\-block\-\_\-size}!heap.c@{heap.\-c}}
\subsubsection[{heap\-\_\-block\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}int16\-\_\-t heap\-\_\-block\-\_\-size (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{heap_8c_a2cef40244ac137adf9e95ddc0aaced37}


the number of bytes per block 



Definition at line 127 of file heap.\-c.

\hypertarget{heap_8c_ab1ae7675c875d925b42d6e99d4e7c096}{\index{heap.\-c@{heap.\-c}!heap\-\_\-blocks\-\_\-allocated@{heap\-\_\-blocks\-\_\-allocated}}
\index{heap\-\_\-blocks\-\_\-allocated@{heap\-\_\-blocks\-\_\-allocated}!heap.c@{heap.\-c}}
\subsubsection[{heap\-\_\-blocks\-\_\-allocated}]{\setlength{\rightskip}{0pt plus 5cm}int16\-\_\-t heap\-\_\-blocks\-\_\-allocated (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{heap_8c_ab1ae7675c875d925b42d6e99d4e7c096}


total up all the blocks used. 



Definition at line 135 of file heap.\-c.



Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{heap_8c_ab1ae7675c875d925b42d6e99d4e7c096_icgraph}
\end{center}
\end{figure}


\hypertarget{heap_8c_a792289a6840e798dc757b886bdf710a0}{\index{heap.\-c@{heap.\-c}!heap\-\_\-bytes\-\_\-free@{heap\-\_\-bytes\-\_\-free}}
\index{heap\-\_\-bytes\-\_\-free@{heap\-\_\-bytes\-\_\-free}!heap.c@{heap.\-c}}
\subsubsection[{heap\-\_\-bytes\-\_\-free}]{\setlength{\rightskip}{0pt plus 5cm}int32\-\_\-t heap\-\_\-bytes\-\_\-free (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{heap_8c_a792289a6840e798dc757b886bdf710a0}


Definition at line 145 of file heap.\-c.

\hypertarget{heap_8c_ae90ef9a2898ebd56b63f3c69722a11c3}{\index{heap.\-c@{heap.\-c}!heap\-\_\-bytes\-\_\-used@{heap\-\_\-bytes\-\_\-used}}
\index{heap\-\_\-bytes\-\_\-used@{heap\-\_\-bytes\-\_\-used}!heap.c@{heap.\-c}}
\subsubsection[{heap\-\_\-bytes\-\_\-used}]{\setlength{\rightskip}{0pt plus 5cm}int32\-\_\-t heap\-\_\-bytes\-\_\-used (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{heap_8c_ae90ef9a2898ebd56b63f3c69722a11c3}


Definition at line 140 of file heap.\-c.

\hypertarget{heap_8c_af50bdf5542fa0191f84e75165f30e31c}{\index{heap.\-c@{heap.\-c}!heap\-\_\-init@{heap\-\_\-init}}
\index{heap\-\_\-init@{heap\-\_\-init}!heap.c@{heap.\-c}}
\subsubsection[{heap\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void heap\-\_\-init (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{heap\-\_\-base, }
\item[{void $\ast$}]{heap\-\_\-end}
\end{DoxyParamCaption}
)}}\label{heap_8c_af50bdf5542fa0191f84e75165f30e31c}


Initialize memory. 



Definition at line 119 of file heap.\-c.

\hypertarget{heap_8c_a7ac38fce3243a7dcf448301ee9ffd392}{\index{heap.\-c@{heap.\-c}!malloc@{malloc}}
\index{malloc@{malloc}!heap.c@{heap.\-c}}
\subsubsection[{malloc}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ malloc (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{heap_8c_a7ac38fce3243a7dcf448301ee9ffd392}
\hyperlink{heap_8c_a7ac38fce3243a7dcf448301ee9ffd392}{malloc()} allocates size bytes and returns a pointer to the allocated memory. The memory is not cleared. If size is 0, then \hyperlink{heap_8c_a7ac38fce3243a7dcf448301ee9ffd392}{malloc()} returns either N\-U\-L\-L, or a unique pointer value that can later be successfully passed to \hyperlink{heap_8c_a019c98a43fec3993d2260e84c11341fd}{free()}. 

Definition at line 154 of file heap.\-c.



Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{heap_8c_a7ac38fce3243a7dcf448301ee9ffd392_icgraph}
\end{center}
\end{figure}


\hypertarget{heap_8c_aa3cfaf307c4cdf46df247dcd3a0416f5}{\index{heap.\-c@{heap.\-c}!realloc@{realloc}}
\index{realloc@{realloc}!heap.c@{heap.\-c}}
\subsubsection[{realloc}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ realloc (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{pointer, }
\item[{size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{heap_8c_aa3cfaf307c4cdf46df247dcd3a0416f5}
\hyperlink{heap_8c_aa3cfaf307c4cdf46df247dcd3a0416f5}{realloc()} changes the size of the memory block pointed to by ptr to size bytes. The contents will be unchanged to the minimum of the old and new sizes; newly allocated memory will be uninitialized. If ptr is N\-U\-L\-L, then the call is equivalent to mal‐ loc(size), for all values of size; if size is equal to zero, and ptr is not N\-U\-L\-L, then the call is equivalent to free(ptr). Unless ptr is N\-U\-L\-L, it must have been returned by an earlier call to \hyperlink{heap_8c_a7ac38fce3243a7dcf448301ee9ffd392}{malloc()} or \hyperlink{heap_8c_aa3cfaf307c4cdf46df247dcd3a0416f5}{realloc()}. If the area pointed to was moved, a free(ptr) is done. 

Definition at line 166 of file heap.\-c.



Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{heap_8c_aa3cfaf307c4cdf46df247dcd3a0416f5_icgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{heap_8c_a2c60276ce265f5ea95b8d367ce0e28bf}{\index{heap.\-c@{heap.\-c}!\-\_\-\-\_\-heap\-\_\-end\-\_\-\-\_\-@{\-\_\-\-\_\-heap\-\_\-end\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-heap\-\_\-end\-\_\-\-\_\-@{\-\_\-\-\_\-heap\-\_\-end\-\_\-\-\_\-}!heap.c@{heap.\-c}}
\subsubsection[{\-\_\-\-\_\-heap\-\_\-end\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t \-\_\-\-\_\-heap\-\_\-end\-\_\-\-\_\-}}\label{heap_8c_a2c60276ce265f5ea95b8d367ce0e28bf}


H\-E\-A\-P segment end. 

\begin{DoxyPrecond}{Precondition}
The symbol must be aligned to a 32 bits boundary. 
\end{DoxyPrecond}
\hypertarget{heap_8c_a48785c93bbc92c3bd4d36645c981d48a}{\index{heap.\-c@{heap.\-c}!\-\_\-\-\_\-heap\-\_\-start\-\_\-\-\_\-@{\-\_\-\-\_\-heap\-\_\-start\-\_\-\-\_\-}}
\index{\-\_\-\-\_\-heap\-\_\-start\-\_\-\-\_\-@{\-\_\-\-\_\-heap\-\_\-start\-\_\-\-\_\-}!heap.c@{heap.\-c}}
\subsubsection[{\-\_\-\-\_\-heap\-\_\-start\-\_\-\-\_\-}]{\setlength{\rightskip}{0pt plus 5cm}uint32\-\_\-t \-\_\-\-\_\-heap\-\_\-start\-\_\-\-\_\-}}\label{heap_8c_a48785c93bbc92c3bd4d36645c981d48a}


H\-E\-A\-P segment start. 

\begin{DoxyPrecond}{Precondition}
The symbol must be aligned to a 32 bits boundary. 
\end{DoxyPrecond}
