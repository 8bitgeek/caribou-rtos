\hypertarget{semaphore_8c}{\section{src/lib/semaphore.c File Reference}
\label{semaphore_8c}\index{src/lib/semaphore.\-c@{src/lib/semaphore.\-c}}
}
{\ttfamily \#include $<$caribou/kernel/interrupt.\-h$>$}\\*
{\ttfamily \#include $<$caribou/lib/semaphore.\-h$>$}\\*
{\ttfamily \#include $<$caribou/lib/errno.\-h$>$}\\*
{\ttfamily \#include $<$caribou/lib/heap.\-h$>$}\\*
{\ttfamily \#include $<$caribou/lib/string.\-h$>$}\\*
Include dependency graph for semaphore.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$ \hyperlink{semaphore_8c_ae501db685b32b8d9ee96ac5c04d1203a}{caribou\-\_\-semaphore\-\_\-new} (int depth, int count)
\begin{DoxyCompactList}\small\item\em Allocate and initialize a new semaphore on the heap. \end{DoxyCompactList}\item 
void \hyperlink{semaphore_8c_aa3c929c9378394cf694e18d4b3d94a2b}{caribou\-\_\-semaphore\-\_\-delete} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore)
\item 
\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$ \hyperlink{semaphore_8c_aafa3df5fadb173a330f61b3c58052788}{caribou\-\_\-semaphore\-\_\-init} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore, \hyperlink{queue_8h_a4f0b560adcb67d9f889225d932d36070}{caribou\-\_\-queue\-\_\-t} $\ast$queue, int count)
\item 
\hyperlink{queue_8h_a4f0b560adcb67d9f889225d932d36070}{caribou\-\_\-queue\-\_\-t} $\ast$ \hyperlink{semaphore_8c_a71aaf84aadb477872e550a84fb6bf50a}{caribou\-\_\-semaphore\-\_\-queue} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore)
\item 
\hyperlink{types_8h_abb452686968e48b67397da5f97445f5b}{bool} \hyperlink{semaphore_8c_aa7f7d598cb498003f0dcb5bed70df47d}{caribou\-\_\-semaphore\-\_\-signal} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore)
\begin{DoxyCompactList}\small\item\em This operation increases the semaphore counter, if the result is non-\/negative then a waiting thread is removed from the queue and resumed. Threads are removed from the queue in a F\-I\-F\-O manner. \end{DoxyCompactList}\item 
\hyperlink{types_8h_abb452686968e48b67397da5f97445f5b}{bool} \hyperlink{semaphore_8c_a43b2a6ceea574eaf6363d3071be24901}{caribou\-\_\-semaphore\-\_\-wait} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore, \hyperlink{timer_8h_a905a26361b93888fedb5a0bf658e50e8}{caribou\-\_\-tick\-\_\-t} timeout)
\begin{DoxyCompactList}\small\item\em This operation decreases the semaphore counter, if the result is negative then the invoking thread is queued. \end{DoxyCompactList}\item 
\hyperlink{types_8h_abb452686968e48b67397da5f97445f5b}{bool} \hyperlink{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81}{caribou\-\_\-semaphore\-\_\-try\-\_\-wait} (\hyperlink{semaphore_8h_ae113c5b6ac8221ed7e91cd0fe2a5c9ee}{caribou\-\_\-semaphore\-\_\-t} $\ast$semaphore)
\begin{DoxyCompactList}\small\item\em This operation decreases the semaphore counter, if the result is negative then the invoking thread is queued. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{semaphore_8c_aa3c929c9378394cf694e18d4b3d94a2b}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-delete@{caribou\-\_\-semaphore\-\_\-delete}}
\index{caribou\-\_\-semaphore\-\_\-delete@{caribou\-\_\-semaphore\-\_\-delete}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-delete}]{\setlength{\rightskip}{0pt plus 5cm}void caribou\-\_\-semaphore\-\_\-delete (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_aa3c929c9378394cf694e18d4b3d94a2b}


Definition at line 50 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_aa3c929c9378394cf694e18d4b3d94a2b_cgraph}
\end{center}
\end{figure}


\hypertarget{semaphore_8c_aafa3df5fadb173a330f61b3c58052788}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-init@{caribou\-\_\-semaphore\-\_\-init}}
\index{caribou\-\_\-semaphore\-\_\-init@{caribou\-\_\-semaphore\-\_\-init}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf caribou\-\_\-semaphore\-\_\-t}$\ast$ caribou\-\_\-semaphore\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore, }
\item[{{\bf caribou\-\_\-queue\-\_\-t} $\ast$}]{queue, }
\item[{int}]{count}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_aafa3df5fadb173a330f61b3c58052788}


Definition at line 66 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=288pt]{semaphore_8c_aafa3df5fadb173a330f61b3c58052788_cgraph}
\end{center}
\end{figure}


\hypertarget{semaphore_8c_ae501db685b32b8d9ee96ac5c04d1203a}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-new@{caribou\-\_\-semaphore\-\_\-new}}
\index{caribou\-\_\-semaphore\-\_\-new@{caribou\-\_\-semaphore\-\_\-new}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-new}]{\setlength{\rightskip}{0pt plus 5cm}{\bf caribou\-\_\-semaphore\-\_\-t}$\ast$ caribou\-\_\-semaphore\-\_\-new (
\begin{DoxyParamCaption}
\item[{int}]{depth, }
\item[{int}]{count}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_ae501db685b32b8d9ee96ac5c04d1203a}


Allocate and initialize a new semaphore on the heap. 



 
\begin{DoxyParams}{Parameters}
{\em depth} & The depth of the thread queue (max number of waiting threads). \\
\hline
{\em count} & The initial semaphore count. \\
\hline
\end{DoxyParams}


Definition at line 30 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_ae501db685b32b8d9ee96ac5c04d1203a_cgraph}
\end{center}
\end{figure}


\hypertarget{semaphore_8c_a71aaf84aadb477872e550a84fb6bf50a}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-queue@{caribou\-\_\-semaphore\-\_\-queue}}
\index{caribou\-\_\-semaphore\-\_\-queue@{caribou\-\_\-semaphore\-\_\-queue}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-queue}]{\setlength{\rightskip}{0pt plus 5cm}{\bf caribou\-\_\-queue\-\_\-t}$\ast$ caribou\-\_\-semaphore\-\_\-queue (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_a71aaf84aadb477872e550a84fb6bf50a}


Definition at line 76 of file semaphore.\-c.

\hypertarget{semaphore_8c_aa7f7d598cb498003f0dcb5bed70df47d}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-signal@{caribou\-\_\-semaphore\-\_\-signal}}
\index{caribou\-\_\-semaphore\-\_\-signal@{caribou\-\_\-semaphore\-\_\-signal}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-signal}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} caribou\-\_\-semaphore\-\_\-signal (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_aa7f7d598cb498003f0dcb5bed70df47d}


This operation increases the semaphore counter, if the result is non-\/negative then a waiting thread is removed from the queue and resumed. Threads are removed from the queue in a F\-I\-F\-O manner. 



 
\begin{DoxyParams}{Parameters}
{\em semaphore} & The semaphore to operate on. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the semaphore was released. 
\end{DoxyReturn}


Definition at line 90 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_aa7f7d598cb498003f0dcb5bed70df47d_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_aa7f7d598cb498003f0dcb5bed70df47d_icgraph}
\end{center}
\end{figure}


\hypertarget{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-try\-\_\-wait@{caribou\-\_\-semaphore\-\_\-try\-\_\-wait}}
\index{caribou\-\_\-semaphore\-\_\-try\-\_\-wait@{caribou\-\_\-semaphore\-\_\-try\-\_\-wait}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-try\-\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} caribou\-\_\-semaphore\-\_\-try\-\_\-wait (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81}


This operation decreases the semaphore counter, if the result is negative then the invoking thread is queued. 



 
\begin{DoxyParams}{Parameters}
{\em semaphore} & The semaphore to operate on. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true of the semaphore was released. 
\end{DoxyReturn}


Definition at line 132 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_a1635c84bee0dd09c227e76e764cc0b81_icgraph}
\end{center}
\end{figure}


\hypertarget{semaphore_8c_a43b2a6ceea574eaf6363d3071be24901}{\index{semaphore.\-c@{semaphore.\-c}!caribou\-\_\-semaphore\-\_\-wait@{caribou\-\_\-semaphore\-\_\-wait}}
\index{caribou\-\_\-semaphore\-\_\-wait@{caribou\-\_\-semaphore\-\_\-wait}!semaphore.c@{semaphore.\-c}}
\subsubsection[{caribou\-\_\-semaphore\-\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} caribou\-\_\-semaphore\-\_\-wait (
\begin{DoxyParamCaption}
\item[{{\bf caribou\-\_\-semaphore\-\_\-t} $\ast$}]{semaphore, }
\item[{{\bf caribou\-\_\-tick\-\_\-t}}]{timeout}
\end{DoxyParamCaption}
)}}\label{semaphore_8c_a43b2a6ceea574eaf6363d3071be24901}


This operation decreases the semaphore counter, if the result is negative then the invoking thread is queued. 



 
\begin{DoxyParams}{Parameters}
{\em semaphore} & The semaphore to operate on. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true of the semaphore was released. 
\end{DoxyReturn}


Definition at line 117 of file semaphore.\-c.



Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{semaphore_8c_a43b2a6ceea574eaf6363d3071be24901_cgraph}
\end{center}
\end{figure}


